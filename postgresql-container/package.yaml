_common/package: !include "../common/package.yaml"

name:        dbt-postgresql-container
version:     0.1.0
synopsis:    DBT Postgresql container tool

<<: *defaults

dependencies:
- base
- bytestring                ^>= 0.10
- cbt                       ^>= 0.1.0
- containers                ^>= 0.6
- conversions               ^>= 0.0.3
- dbt-postgresql-connection ^>= 0.1.0
- hasql                     ^>= 1.4
- mprelude                  ^>= 0.2.0
- mrio-log                  ^>= 0.0.1
- mrio-core                 ^>= 0.0.1
- mtl                       ^>= 2.2
- network                   ^>= 3.1
- optparse-applicative      ^>= 0.15 || ^>= 0.16
- pathtype                  ^>= 0.8
- source-constraints        ^>= 0.0.1
- template-haskell
- text                      ^>= 1.2
- th-lift-instances         ^>= 0.1
- typed-process             ^>= 0.2
- unliftio                  ^>= 0.2
- unliftio-core             ^>= 0.2

library:
  source-dirs: src
  exposed-modules:
  - DBT.Postgresql.Container
  - DBT.Postgresql.Container.CLI

executables:
  dbt:
    main:        Main.hs
    source-dirs: app
    ghc-options:
    - -rtsopts
    - -threaded
    - -with-rtsopts=-N
    dependencies:
    - dbt-postgresql-container

tests:
  test:
    <<: *test
    dependencies:
    - dbt-postgresql-connection
    - dbt-postgresql-container
    - devtools ^>= 0.1.0
    - tasty
    - tasty-mgolden
